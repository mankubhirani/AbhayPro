<main id="main" class="main m-0">
  <section class="section mb-3">
    <div class="row">
      <div class="col-md-12">
        <div class="row">
          <div class="col-md-5">
            <h6>
              <a routerLink="/book-management/net-exposure"
                ><i class="fa fa-1x fa-circle-chevron-left"></i
              ></a>
              <small> {{ matchName }} </small>
            </h6>
          </div>
          <div class="col-md-4 text-end">
            <p>
              <a class="text-decoration-none">
                <input
                  type="radio"
                  class="radioselected cursor-pointer"
                  id="html"
                  name="fav_language"
                  value="HTML"
                  (click)="onFilterChange(true)"
                /><small class="rounded-pill p-2 m-2">My PT</small>
              </a>
              <a class="text-decoration-none">
                <input
                  type="radio"
                  checked
                  class="radioselected cursor-pointer"
                  id="html"
                  name="fav_language"
                  value="HTML"
                  (click)="onFilterChange(false)"
                /><small class="rounded-pill p-2 m-2">Total Book</small>
              </a>
            </p>
          </div>
          <div class="col-md-3 text-end">
            <small>{{ refreshCount }} </small> &nbsp;
            <button
              [disabled]="refreshCount == 0"
              class="btn btn-pink rounded-pill ps-4 pe-4"
              (click)="refreshCall()"
            >
              <i class="fa fa-redo-alt disnone"></i> <small> Refresh </small>
            </button>
            <!-- <button
              class="btn btn-pink rounded-pill ps-4 pe-4 ms-2"
              (click)="hideShowTV()"
            >
              <i [ngClass]="isTVEnable ? 'fa fa-xmark' : 'fa fa-play'"></i
              >&nbsp;{{ isTVEnable ? "HIDE" : "WATCH" }}
            </button> -->
          </div>

          <div class="col-md-12" *ngIf="liveStreamingTVUrl" id="videoplayer">
            <iframe
              [src]="
                sanitizer.bypassSecurityTrustResourceUrl(liveStreamingTVUrl)
              "
              scrolling="no"
            ></iframe>
          </div>
        </div>
        <!-- <div class="row">
          <div class="col-md-6"></div>

        </div> -->

        <div class="row">
          <div class="col-md-12">
            <div
              class="accordion"
              id="accordionExample"
              *ngFor="let singleAdminBook of adminBooksList; let i = index"
            >
              <div class="accordion-item bg-transparent border-0">
                <h2 class="accordion-header" id="headingOne">
                  <a
                    class="text-decoration-none w-100"
                    data-bs-toggle="collapse"
                    data-bs-target="#collapseOne"
                    aria-expanded="true"
                    aria-controls="collapseOne"
                  >
                    <div
                      *ngIf="singleAdminBook['marketTypName'] !== 'Fancy'"
                      class="row"
                      data-bs-toggle="collapse"
                      data-bs-target="#collapseOne"
                      aria-expanded="true"
                      aria-controls="collapseOne"
                    >
                      <div class="col-md-6">
                        <p class="mt-3 mb-1">
                          <i class="fa fa-minus"></i>
                          <i class="fa fa-plus"></i>
                          {{ singleAdminBook["marketName"] }}
                        </p>
                      </div>
                    </div>
                  </a>
                </h2>
                <div
                  id="collapseOne"
                  class="accordion-collapse collapse show"
                  aria-labelledby="headingOne"
                  data-bs-parent="#accordionExample"
                >
                  <div class="accordion-body p-0">
                    <div class="row">
                      <div class="col-md-6">
                        <div class="bg-white border-5 shadow-lg">
                          <table class="table tablematchodds bg-transparent">
                            <tbody>
                              <ng-container
                                *ngIf="
                                  singleAdminBook['marketTypName'] ==
                                  'Match Odds'
                                "
                              >
                                <tr
                                  *ngFor="
                                    let runner of singleAdminBook['adminBook'];
                                    let last = last;
                                    let first = first
                                  "
                                >
                                  <td
                                    class="text-start ps-2 heading border-top"
                                  >
                                    <a
                                      ><strong
                                        >{{ runner["RunnerName"] }}
                                      </strong>

                                      <br />
                                      <p class="mb-0 mt-1">
                                        <small
                                          [ngClass]="
                                            runner['amount'] <= 0
                                              ? 'text-danger'
                                              : 'text-success'
                                          "
                                          class="text-success"
                                          ><strong class="exposure-font">{{
                                            runner["amount"] | indianCurrency
                                          }}</strong></small
                                        >
                                      </p>
                                    </a>
                                  </td>
                                  <td
                                    *ngIf="
                                      singleAdminBook['appMarketStatus'] !=
                                        '3' &&
                                      singleAdminBook['appMarketStatus'] != '9'
                                    "
                                    class="colblue"
                                    [boxHighlight]="runner['back2']"
                                    [boxHighlight]="runner['vback2']"
                                  >
                                    <a
                                      ><strong>{{ runner["back2"] }}</strong>
                                      <br />
                                      <small>{{
                                        runner["vback2"] | marketRateFormater
                                      }}</small></a
                                    >
                                  </td>
                                  <td
                                    *ngIf="
                                      singleAdminBook['appMarketStatus'] !=
                                        '3' &&
                                      singleAdminBook['appMarketStatus'] != '9'
                                    "
                                    class="colblue"
                                    [boxHighlight]="runner['back1']"
                                    [boxHighlight]="runner['vback1']"
                                  >
                                    <a
                                      ><strong>{{ runner["back1"] }}</strong>
                                      <br /><small>{{
                                        runner["vback1"] | marketRateFormater
                                      }}</small></a
                                    >
                                  </td>
                                  <!-- <td class="colgray">-</td>
                                <td class="colgray">-</td> -->
                                  <td
                                    *ngIf="
                                      singleAdminBook['appMarketStatus'] !=
                                        '3' &&
                                      singleAdminBook['appMarketStatus'] != '9'
                                    "
                                    class="colblue"
                                    [boxHighlight]="runner['back0']"
                                    [boxHighlight]="runner['vback0']"
                                  >
                                    <a
                                      ><strong>{{ runner["back0"] }}</strong>
                                      <br /><small>{{
                                        runner["vback0"] | marketRateFormater
                                      }}</small></a
                                    >
                                  </td>
                                  <td
                                    *ngIf="
                                      singleAdminBook['appMarketStatus'] !=
                                        '3' &&
                                      singleAdminBook['appMarketStatus'] != '9'
                                    "
                                    class="colpink"
                                    [boxHighlight]="runner['lay0']"
                                    [boxHighlight]="runner['vlay0']"
                                  >
                                    <a
                                      ><strong>{{ runner["lay0"] }}</strong>
                                      <br /><small>{{
                                        runner["vlay0"] | marketRateFormater
                                      }}</small></a
                                    >
                                  </td>

                                  <td
                                    *ngIf="
                                      singleAdminBook['appMarketStatus'] !=
                                        '3' &&
                                      singleAdminBook['appMarketStatus'] != '9'
                                    "
                                    class="colpink"
                                    [boxHighlight]="runner['lay1']"
                                    [boxHighlight]="runner['vlay1']"
                                  >
                                    <a
                                      ><strong>{{ runner["lay1"] }}</strong>
                                      <br /><small>{{
                                        runner["vlay1"] | marketRateFormater
                                      }}</small></a
                                    >
                                  </td>

                                  <td
                                    *ngIf="
                                      singleAdminBook['appMarketStatus'] !=
                                        '3' &&
                                      singleAdminBook['appMarketStatus'] != '9'
                                    "
                                    class="colpink"
                                    [boxHighlight]="runner['lay2']"
                                    [boxHighlight]="runner['vlay2']"
                                  >
                                    <a
                                      ><strong>{{ runner["lay2"] }}</strong>
                                      <br /><small>{{
                                        runner["vlay2"] | marketRateFormater
                                      }}</small></a
                                    >
                                  </td>
                                  <td
                                    class="border-top"
                                    [ngClass]="{ 'border-top': !first }"
                                  >
                                    <div
                                      class="suspendedbm1"
                                      *ngIf="
                                        singleAdminBook['appMarketStatus'] ==
                                          '3' ||
                                        singleAdminBook['appMarketStatus'] ==
                                          '9'
                                      "
                                    >
                                      <button type="button" class="suspendedm1">
                                        {{
                                          singleAdminBook["appMarketStatus"] ==
                                          "9"
                                            ? "Ball Running"
                                            : "Suspended"
                                        }}
                                      </button>
                                    </div>
                                  </td>
                                </tr>
                              </ng-container>
                              <ng-container
                                *ngIf="
                                  singleAdminBook['marketTypName'] ==
                                  'Bookmaker'
                                "
                              >
                                <tr
                                  *ngFor="
                                    let runner of singleAdminBook['adminBook'];
                                    let last = last;
                                    let first = first
                                  "
                                >
                                  <td
                                    class="text-start ps-2 heading border-top"
                                  >
                                    <a
                                      ><strong>{{
                                        runner["RunnerName"]
                                      }}</strong>
                                      <br />
                                      <small
                                        [ngClass]="
                                          runner['amount'] <= 0
                                            ? 'text-danger'
                                            : 'text-success'
                                        "
                                      >
                                        <strong class="exposure-font">{{
                                          runner["amount"] | indianCurrency
                                        }}</strong></small
                                      >
                                    </a>
                                  </td>

                                  <!-- <td class="colgray">-</td>
                                <td class="colgray">-</td> -->
                                  <td
                                    *ngIf="
                                      singleAdminBook['appMarketStatus'] !=
                                        '3' &&
                                      singleAdminBook['appMarketStatus'] !=
                                        '9' &&
                                      !runner['showSuspended']
                                    "
                                    class="colblue"
                                    [boxHighlight]="runner['back1']"
                                    [boxHighlight]="runner['vback1']"
                                  >
                                    <a
                                      ><strong *ngIf="runner['back1']">{{
                                        (runner["back1"] - 1) * 100
                                          | roundToHalf
                                      }}</strong>
                                      <br /><small *ngIf="runner['vback1']">{{
                                        runner["vback1"] | marketRateFormater
                                      }}</small></a
                                    >
                                  </td>
                                  <td
                                    *ngIf="
                                      singleAdminBook['appMarketStatus'] !=
                                        '3' &&
                                      singleAdminBook['appMarketStatus'] !=
                                        '9' &&
                                      !runner['showSuspended']
                                    "
                                    class="colpink"
                                    [boxHighlight]="runner['lay1']"
                                    [boxHighlight]="runner['vlay1']"
                                  >
                                    <a
                                      ><strong *ngIf="runner['lay1']">{{
                                        (runner["lay1"] - 1) * 100 | roundToHalf
                                      }}</strong>
                                      <br /><small *ngIf="runner['vlay1']">{{
                                        runner["vlay1"] | marketRateFormater
                                      }}</small></a
                                    >
                                  </td>
                                  <td
                                    colspan="4"
                                    class="border-top"
                                    [ngClass]="{ 'border-top': !first }"
                                    *ngIf="
                                      singleAdminBook['appMarketStatus'] ==
                                        '3' ||
                                      singleAdminBook['appMarketStatus'] ==
                                        '9' ||
                                      runner['showSuspended']
                                    "
                                  >
                                    <div
                                      class="suspendedbm1"
                                      *ngIf="
                                        singleAdminBook['appMarketStatus'] ==
                                          '3' ||
                                        singleAdminBook['appMarketStatus'] ==
                                          '9'
                                      "
                                    >
                                      <button type="button" class="suspendedm1">
                                        {{
                                          singleAdminBook["appMarketStatus"] ==
                                          "9"
                                            ? "Ball Running"
                                            : "Suspended"
                                        }}
                                      </button>
                                    </div>
                                    <div
                                      class="suspendedbm1"
                                      *ngIf="
                                        singleAdminBook['appMarketStatus'] !=
                                          '3' &&
                                        singleAdminBook['appMarketStatus'] !=
                                          '9' &&
                                        runner['showSuspended']
                                      "
                                    >
                                      <button type="button" class="suspendedm1">
                                        Suspended
                                      </button>
                                    </div>
                                  </td>
                                </tr>
                              </ng-container>

                              <ng-container
                                *ngIf="
                                  singleAdminBook['marketTypName'] == 'Fancy'
                                "
                              >
                                <tr
                                  *ngFor="
                                    let runner of singleAdminBook['adminBook'];
                                    let last = last;
                                    let first = first
                                  "
                                >
                                  <td
                                    class="text-start ps-2 heading border-top"
                                  >
                                    <a
                                      ><strong>{{
                                        runner["RunnerName"]
                                      }}</strong
                                      ><br />
                                      <small
                                        [ngClass]="
                                          runner['amount'] <= 0
                                            ? 'text-danger'
                                            : 'text-success'
                                        "
                                      >
                                        <strong class="exposure-font">
                                          {{
                                            runner["amount"] | indianCurrency
                                          }}</strong
                                        >
                                      </small>
                                    </a>
                                  </td>
                                  <td>
                                    <a><strong></strong> <br /></a>
                                  </td>
                                  <td>
                                    <a><strong></strong> <br /></a>
                                  </td>
                                  <td
                                    width="10%"
                                    class="border-top"
                                    [ngClass]="{ 'border-top': !first }"
                                  >
                                    <a
                                      data-bs-toggle="modal"
                                      href="#exampleModalToggle"
                                      role="button"
                                      class="laddericon"
                                      (click)="
                                        getLadderDataByMarket(
                                          singleAdminBook['marketId']
                                        )
                                      "
                                    >
                                      <img
                                        src="/assets/images/ladder-icon.png"
                                        width="10px"
                                      />
                                    </a>
                                  </td>
                                  <!-- <td class="colgray">-</td>
                                <td class="colgray">-</td> -->

                                  <td
                                    *ngIf="
                                      singleAdminBook['appMarketStatus'] !=
                                        '3' &&
                                      singleAdminBook['appMarketStatus'] != '9'
                                    "
                                    class="colpink"
                                    [boxHighlight]="runner['lay1']"
                                    [boxHighlight]="runner['vlay1']"
                                  >
                                    <a
                                      ><strong>{{ runner["lay1"] }}</strong>
                                      <br /><small>{{
                                        runner["vlay1"] | marketRateFormater
                                      }}</small></a
                                    >
                                  </td>
                                  <td
                                    *ngIf="
                                      singleAdminBook['appMarketStatus'] !=
                                        '3' &&
                                      singleAdminBook['appMarketStatus'] != '9'
                                    "
                                    class="colblue"
                                    [boxHighlight]="runner['back1']"
                                    [boxHighlight]="runner['vback1']"
                                  >
                                    <a
                                      ><strong>{{ runner["back1"] }}</strong>
                                      <br /><small>{{
                                        runner["vback1"] | marketRateFormater
                                      }}</small></a
                                    >
                                  </td>

                                  <td
                                    class="border-top"
                                    [ngClass]="{ 'border-top': !first }"
                                    class="suspendedbm1"
                                    *ngIf="
                                      singleAdminBook['appMarketStatus'] ==
                                        '3' ||
                                      singleAdminBook['appMarketStatus'] == '9'
                                    "
                                  >
                                    <button type="button" class="suspendedm1">
                                      {{
                                        singleAdminBook["appMarketStatus"] ==
                                        "9"
                                          ? "Ball Running"
                                          : "Suspended"
                                      }}
                                    </button>
                                  </td>
                                </tr>
                              </ng-container>
                            </tbody>
                          </table>
                        </div>
                      </div>
                      <div class="col-md-6 my-3 my-md-0">
                        <div class="bg-white border-5 shadow-lg">
                          <table class="table bg-transparent align_thead">
                            <thead>
                              <tr>
                                <th class=""></th>
                                <th class="text-center"></th>
                                <th class="text-center">Stakes</th>
                                <th class="text-center">1</th>
                                <th class="text-center">X</th>
                                <th class="text-center">2</th>
                              </tr>
                            </thead>
                            <tbody>
                              <tr
                                *ngFor="
                                  let userBook of singleAdminBook['userBook']
                                "
                              >
                                <td colspan="1" class="border-top">
                                  <strong> {{ userBook["username"] }}</strong>
                                </td>
                                <td
                                  (click)="
                                    getTotalBookViewTotal(
                                      singleAdminBook['marketId'],
                                      singleAdminBook['isTotaltotalBookView'],
                                      singleAdminBook
                                    )
                                  "
                                  colspan="1"
                                  class="text-center border-top"
                                  style="cursor: pointer"
                                >
                                  <img
                                    src="/assets/images/net_expo.png"
                                    width="12"
                                  />
                                </td>
                                <td colspan="1" class="text-center border-top">
                                  <strong>{{
                                    userBook["stake"] | indianCurrency
                                  }}</strong>
                                </td>
                                <td colspan="1" class="text-center border-top">
                                  <strong
                                    class="text-success"
                                    *ngIf="userBook['runner1'] > 0"
                                    >{{
                                      userBook["runner1"] | indianCurrency
                                    }}</strong
                                  >
                                  <strong
                                    class="text-danger"
                                    *ngIf="userBook['runner1'] <= 0"
                                    >{{
                                      userBook["runner1"] | indianCurrency
                                    }}</strong
                                  >
                                </td>
                                <td colspan="1" class="text-center border-top">
                                  <strong
                                    class="text-success"
                                    *ngIf="userBook['runner3'] > 0"
                                    >{{
                                      userBook["runner3"] | indianCurrency
                                    }}</strong
                                  >
                                  <strong
                                    class="text-danger"
                                    *ngIf="userBook['runner3'] <= 0"
                                    >{{
                                      userBook["runner3"] | indianCurrency
                                    }}</strong
                                  >
                                </td>
                                <td colspan="1" class="text-center border-top">
                                  <strong
                                    class="text-success"
                                    *ngIf="userBook['runner2'] > 0"
                                    >{{
                                      userBook["runner2"] | indianCurrency
                                    }}</strong
                                  >
                                  <strong
                                    class="text-danger"
                                    *ngIf="userBook['runner2'] <= 0"
                                    >{{
                                      userBook["runner2"] | indianCurrency
                                    }}</strong
                                  >
                                </td>
                              </tr>

                              <ng-container
                                *ngIf="singleAdminBook['isTotaltotalBookView']"
                              >
                                <ng-container
                                  *ngFor="let downline of downlineBooks"
                                >
                                  <tr
                                    class="border-top"
                                    *ngIf="
                                      downline.marketId ==
                                      singleAdminBook.marketId
                                    "
                                  >
                                    <td colspan="1" class="ps-3">
                                      {{ downline.userName }} ({{
                                        downline.role
                                      }})
                                    </td>
                                    <td colspan="1" class="text-center">
                                      <img
                                        *ngIf="downline.downline.length > 0"
                                        src="/assets/images/net_expo.png"
                                        width="12"
                                        (click)="
                                          downline.isExpanded =
                                            !downline.isExpanded
                                        "
                                      />
                                    </td>
                                    <td colspan="1" class="text-center"></td>
                                    <td colspan="1" class="text-center">
                                      {{
                                        downline.runner1Amount | indianCurrency
                                      }}
                                    </td>
                                    <td colspan="1" class="text-center">
                                      {{
                                        downline.runner3Amount | indianCurrency
                                      }}
                                    </td>
                                    <td colspan="1" class="text-center">
                                      {{
                                        downline.runner2Amount | indianCurrency
                                      }}
                                    </td>
                                  </tr>

                                  <ng-container *ngIf="downline.isExpanded">
                                    <ng-container
                                      *ngFor="
                                        let downline2 of downline.downline
                                      "
                                    >
                                      <ng-container
                                        *ngIf="
                                          downline2.marketId ==
                                          singleAdminBook.marketId
                                        "
                                      >
                                        <tr>
                                          <td colspan="1" class="ps-4">
                                            {{ downline2.userName }}
                                            ({{ downline2.role }})
                                          </td>
                                          <td colspan="1" class="text-center">
                                            <img
                                              *ngIf="
                                                downline2.downline.length > 0
                                              "
                                              src="/assets/images/net_expo.png"
                                              width="12"
                                              (click)="
                                                downline2.isExpanded =
                                                  !downline2.isExpanded
                                              "
                                            />
                                          </td>
                                          <td
                                            colspan="1"
                                            class="text-center"
                                          ></td>
                                          <td colspan="1" class="text-center">
                                            {{
                                              downline2.runner1Amount
                                                | indianCurrency
                                            }}
                                          </td>
                                          <td colspan="1" class="text-center">
                                            {{
                                              downline2.runner3Amount
                                                | indianCurrency
                                            }}
                                          </td>
                                          <td colspan="1" class="text-center">
                                            {{
                                              downline2.runner2Amount
                                                | indianCurrency
                                            }}
                                          </td>
                                        </tr>

                                        <ng-container
                                          *ngIf="downline2.isExpanded"
                                        >
                                          <ng-container
                                            *ngFor="
                                              let downline3 of downline2.downline
                                            "
                                          >
                                            <ng-container
                                              *ngIf="
                                                downline3.marketId ==
                                                singleAdminBook.marketId
                                              "
                                            >
                                              <tr>
                                                <td colspan="1" class=" ">
                                                  {{ downline3.userName }}
                                                  ({{ downline3.role }})
                                                </td>
                                                <td
                                                  colspan="1"
                                                  class="text-center"
                                                >
                                                  <img
                                                    *ngIf="
                                                      downline3.downline
                                                        .length > 0
                                                    "
                                                    src="/assets/images/net_expo.png"
                                                    width="12"
                                                    (click)="
                                                      downline3.isExpanded =
                                                        !downline3.isExpanded
                                                    "
                                                  />
                                                </td>
                                                <td
                                                  colspan="1"
                                                  class="text-center"
                                                ></td>
                                                <td
                                                  colspan="1"
                                                  class="text-center"
                                                >
                                                  {{
                                                    downline3.runner1Amount
                                                      | indianCurrency
                                                  }}
                                                </td>
                                                <td
                                                  colspan="1"
                                                  class="text-center"
                                                >
                                                  {{
                                                    downline3.runner3Amount
                                                      | indianCurrency
                                                  }}
                                                </td>
                                                <td
                                                  colspan="1"
                                                  class="text-center"
                                                >
                                                  {{
                                                    downline3.runner2Amount
                                                      | indianCurrency
                                                  }}
                                                </td>
                                              </tr>

                                              <ng-container
                                                *ngIf="downline3.isExpanded"
                                              >
                                                <ng-container
                                                  *ngFor="
                                                    let downline4 of downline3.downline
                                                  "
                                                >
                                                  <ng-container
                                                    *ngIf="
                                                      downline4.marketId ==
                                                      singleAdminBook.marketId
                                                    "
                                                  >
                                                    <tr>
                                                      <td colspan="1" class="">
                                                        {{ downline4.userName }}

                                                        ({{ downline4.role }})
                                                      </td>
                                                      <td
                                                        colspan="1"
                                                        class="text-center"
                                                      >
                                                        <img
                                                          *ngIf="
                                                            downline4.downline
                                                              .length > 0
                                                          "
                                                          src="/assets/images/net_expo.png"
                                                          width="12"
                                                          (click)="
                                                            downline4.isExpanded =
                                                              !downline4.isExpanded
                                                          "
                                                        />
                                                      </td>
                                                      <td
                                                        colspan="1"
                                                        class="text-center"
                                                      ></td>
                                                      <td
                                                        colspan="1"
                                                        class="text-center"
                                                      >
                                                        {{
                                                          downline4.runner1Amount
                                                            | indianCurrency
                                                        }}
                                                      </td>
                                                      <td
                                                        colspan="1"
                                                        class="text-center"
                                                      >
                                                        {{
                                                          downline4.runner3Amount
                                                            | indianCurrency
                                                        }}
                                                      </td>
                                                      <td
                                                        colspan="1"
                                                        class="text-center"
                                                      >
                                                        {{
                                                          downline4.runner2Amount
                                                            | indianCurrency
                                                        }}
                                                      </td>
                                                    </tr>
                                                    <ng-container
                                                      *ngIf="
                                                        downline4.isExpanded
                                                      "
                                                    >
                                                      <ng-container
                                                        *ngFor="
                                                          let downline5 of downline4.downline
                                                        "
                                                      >
                                                        <ng-container
                                                          *ngIf="
                                                            downline5.marketId ==
                                                            singleAdminBook.marketId
                                                          "
                                                        >
                                                          <tr>
                                                            <td
                                                              class=" "
                                                              colspan="1"
                                                            >
                                                              {{
                                                                downline5.userName
                                                              }}
                                                              ({{
                                                                downline5.role
                                                              }})
                                                            </td>
                                                            <td
                                                              class="text-center"
                                                              colspan="1"
                                                            >
                                                              <img
                                                                *ngIf="
                                                                  downline5
                                                                    .downline
                                                                    .length > 0
                                                                "
                                                                src="/assets/images/net_expo.png"
                                                                width="12"
                                                                (click)="
                                                                  downline5.isExpanded =
                                                                    !downline5.isExpanded
                                                                "
                                                              />
                                                            </td>
                                                            <td
                                                              class="text-center"
                                                              colspan="1"
                                                            ></td>
                                                            <td
                                                              class="text-center"
                                                              colspan="1"
                                                            >
                                                              {{
                                                                downline5.runner1Amount
                                                                  | indianCurrency
                                                              }}
                                                            </td>
                                                            <td
                                                              class="text-center"
                                                              colspan="1"
                                                            >
                                                              {{
                                                                downline5.runner3Amount
                                                                  | indianCurrency
                                                              }}
                                                            </td>
                                                            <td
                                                              class="text-center"
                                                              colspan="1"
                                                            >
                                                              {{
                                                                downline5.runner2Amount
                                                                  | indianCurrency
                                                              }}
                                                            </td>
                                                          </tr>

                                                          <ng-container
                                                            *ngIf="
                                                              downline5.isExpanded
                                                            "
                                                          >
                                                            <ng-container
                                                              class="border-top"
                                                              *ngFor="
                                                                let downline6 of downline5.downline
                                                              "
                                                            >
                                                              <ng-container
                                                                *ngIf="
                                                                  downline6.marketId ==
                                                                  singleAdminBook.marketId
                                                                "
                                                              >
                                                                <tr>
                                                                  <td
                                                                    class=""
                                                                    colspan="1"
                                                                  >
                                                                    {{
                                                                      downline6.userName
                                                                    }}
                                                                    <br />
                                                                    ({{
                                                                      downline6.role
                                                                    }})
                                                                  </td>
                                                                  <td
                                                                    class="text-center"
                                                                    colspan="1"
                                                                  >
                                                                    <img
                                                                      *ngIf="
                                                                        downline6
                                                                          .downline
                                                                          .length >
                                                                        0
                                                                      "
                                                                      src="/assets/images/net_expo.png"
                                                                      width="12"
                                                                      (click)="
                                                                        downline6.isExpanded =
                                                                          !downline6.isExpanded
                                                                      "
                                                                    />
                                                                  </td>
                                                                  <td
                                                                    class="text-center"
                                                                    colspan="1"
                                                                  ></td>
                                                                  <td
                                                                    class="text-center"
                                                                    colspan="1"
                                                                  >
                                                                    {{
                                                                      downline6.runner1Amount
                                                                        | indianCurrency
                                                                    }}
                                                                  </td>
                                                                  <td
                                                                    class="text-center"
                                                                    colspan="1"
                                                                  >
                                                                    {{
                                                                      downline6.runner3Amount
                                                                        | indianCurrency
                                                                    }}
                                                                  </td>
                                                                  <td
                                                                    class="text-center"
                                                                    colspan="1"
                                                                  >
                                                                    {{
                                                                      downline6.runner2Amount
                                                                        | indianCurrency
                                                                    }}
                                                                  </td>
                                                                </tr>
                                                              </ng-container>
                                                            </ng-container>
                                                          </ng-container>
                                                        </ng-container>
                                                      </ng-container>
                                                    </ng-container>
                                                  </ng-container>
                                                </ng-container>
                                              </ng-container>
                                            </ng-container>
                                          </ng-container>
                                        </ng-container>
                                      </ng-container>
                                    </ng-container>
                                  </ng-container>
                                </ng-container>
                              </ng-container>

                              <!-- <tr>

                                  <div *ngIf="downline.isExpanded">
                                    <div *ngFor="let downline2 of downline.downline">
                                      <tr>
                                        <td   class="border-top">{{downline2.userName}} ({{downline2.role}})</td>
                                        <td   class="border-top">
                                          <img *ngIf="downline2.downline.length>0" src="/assets/images/net_expo.png" width="12" (click)="downline2.isExpanded = !downline2.isExpanded" />
                                        </td>
                                        <td   class="border-top"></td>
                                        <td   class="border-top">{{downline2.runner1Amount}}</td>
                                        <td   class="border-top">{{downline2.runner3Amount}}</td>
                                        <td   class="border-top">{{downline2.runner2Amount}}</td>
                                      </tr>

                                      <div *ngIf="downline2.isExpanded">
                                        <div *ngFor="let downline3 of downline2.downline">
                                          <tr>
                                            <td   class="border-top">{{downline3.userName}} ({{downline3.role}})</td>
                                            <td   class="border-top">
                                              <img *ngIf="downline3.downline.length>0" src="/assets/images/net_expo.png" width="12" (click)="downline3.isExpanded = !downline3.isExpanded" />
                                            </td>
                                            <td   class="border-top"></td>
                                            <td   class="border-top">{{downline3.runner1Amount}}</td>
                                            <td   class="border-top">{{downline3.runner3Amount}}</td>
                                            <td   class="border-top">{{downline3.runner2Amount}}</td>
                                          </tr>

                                          <div *ngIf="downline3.isExpanded">
                                            <div *ngFor="let downline4 of downline3.downline">
                                              <tr >
                                                <td   class="border-top">{{downline4.userName}} ({{downline4.role}})</td>
                                                <td   class="border-top">
                                                  <img *ngIf="downline4.downline.length>0" src="/assets/images/net_expo.png" width="12" (click)="downline4.isExpanded = !downline4.isExpanded" />
                                                </td>
                                                <td   class="border-top"></td>
                                                <td   class="border-top">{{downline4.runner1Amount}}</td>
                                                <td   class="border-top">{{downline4.runner3Amount}}</td>
                                                <td   class="border-top">{{downline4.runner2Amount}}</td>
                                              </tr>

                                              <div *ngIf="downline4.isExpanded">
                                                <div *ngFor="let downline5 of downline4.downline">
                                                  <tr >
                                                    <td   class="border-top">{{downline5.userName}} ({{downline5.role}})</td>
                                                    <td   class="border-top">
                                                      <img *ngIf="downline5.downline.length>0" src="/assets/images/net_expo.png" width="12" (click)="downline5.isExpanded = !downline5.isExpanded" />
                                                    </td>
                                                    <td   class="border-top"></td>
                                                    <td   class="border-top">{{downline5.runner1Amount}}</td>
                                                    <td   class="border-top">{{downline5.runner3Amount}}</td>
                                                    <td   class="border-top">{{downline5.runner2Amount}}</td>
                                                  </tr>

                                                  <div *ngIf="downline5.isExpanded">
                                                    <div *ngFor="let downline6 of downline5.downline">
                                                      <tr>
                                                        <td   class="border-top">{{downline6.userName}} ({{downline6.role}})</td>
                                                        <td   class="border-top">
                                                          <img *ngIf="downline6.downline.length>0" src="/assets/images/net_expo.png" width="12" (click)="downline6.isExpanded = !downline6.isExpanded" />
                                                        </td>
                                                        <td   class="border-top"></td>
                                                        <td   class="border-top">{{downline6.runner1Amount}}</td>
                                                        <td   class="border-top">{{downline6.runner3Amount}}</td>
                                                        <td   class="border-top">{{downline6.runner2Amount}}</td>
                                                      </tr>

                                                      <div *ngIf="downline6.isExpanded">
                                                        <div *ngFor="let downline7 of downline6.downline">
                                                          <tr>
                                                            <td *ngIf="downline7.marketId == singleAdminBook.marketId"  class="border-top">{{downline7.userName}} ({{downline7.role}})</td>
                                                            <td *ngIf="downline7.marketId == singleAdminBook.marketId"  class="border-top">
                                                              <img *ngIf="downline7.downline.length>0" src="/assets/images/net_expo.png" width="12" (click)="downline7.isExpanded = !downline7.isExpanded" />
                                                            </td>
                                                            <td *ngIf="downline7.marketId == singleAdminBook.marketId"  class="border-top"></td>
                                                            <td *ngIf="downline7.marketId == singleAdminBook.marketId"  class="border-top">{{downline7.runner1Amount}}</td>
                                                            <td *ngIf="downline7.marketId == singleAdminBook.marketId"  class="border-top">{{downline7.runner3Amount}}</td>
                                                            <td *ngIf="downline7.marketId == singleAdminBook.marketId"  class="border-top">{{downline7.runner2Amount}}</td>
                                                          </tr>
                                                        </div>

                                                      </div>
                                                    </div>



                                                  </div>
                                                </div>

                                              </div>
                                            </div>



                                          </div>
                                        </div>



                                      </div>
                                    </div>
                                  </div>
                                  </tr> -->

                              <!-- <tr *ngFor="
                                  let totalBook of singleAdminBook['totalBook']
                                ">
                                <td class="border-top">
                                  {{ totalBook["username"] }}
                                </td>
                                <td class="border-top"></td>
                                <td class="border-top">
                                  <strong>{{ totalBook["stake"] }}</strong>
                                </td>
                                <td class="border-top">
                                  <strong class="text-success" *ngIf="totalBook['runner1'] > 0">{{
                                      totalBook["runner1"] | number: '1.0-0'
                                    }}</strong>
                                  <strong class="text-danger" *ngIf="totalBook['runner1'] <= 0">{{
                                      totalBook["runner1"] | number: '1.0-0'
                                    }}</strong>
                                </td>
                                <td class="border-top">
                                  <strong class="text-success" *ngIf="totalBook['runner3'] > 0">{{
                                      totalBook["runner3"] | number: '1.0-0'
                                    }}</strong>
                                  <strong class="text-danger" *ngIf="totalBook['runner3'] <= 0">{{
                                      totalBook["runner3"] | number: '1.0-0'
                                    }}</strong>
                                </td>
                                <td class="border-top">
                                  <strong class="text-success" *ngIf="totalBook['runner2'] > 0">{{
                                      totalBook["runner2"] | number: '1.0-0'
                                    }}</strong>
                                  <strong class="text-danger" *ngIf="totalBook['runner2'] <= 0">{{
                                      totalBook["runner2"] | number: '1.0-0'
                                    }}</strong>
                                </td>
                              </tr> -->
                            </tbody>
                          </table>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <section class="section">
    <!-- <div class="col-md-12 mt-1 mb-1">
      <div class="row">
        <div class="col-md-6">
          <input type="text" class="form-control bg-dark text-white radius-left-tb border-pink radius-right-tb"
            placeholder="Search Member Name" aria-label="Search" aria-describedby="addon-wrapping"
            [(ngModel)]="searchTerm" (ngModelChange)="search()" />
        </div>
        <div class="col-md-6 text-end">
          <button *ngIf="viewTotal.length > 0" type="button" class="btn btn-pink rounded-pill ms-2 text-white"
            (click)="exportExcel()">
            Export
          </button>
          Bet Count : {{ viewTotal.length }}
        </div>
      </div>
    </div> -->
    <div class="col-md-12">
      <div class="tableRes tableFixHead">
        <table class="table tableall">
          <thead>
            <tr>
              <th scope="col" class="first">#</th>
              <th scope="col" class="pointer" (click)="toggleSort('userName')">
                Member
              </th>
              <th
                scope="col"
                class="pointer"
                (click)="toggleSort('placedDate')"
              >
                Place time
              </th>
              <th scope="col-2" class="pointer" (click)="toggleSort('event')">
                Events
              </th>
              <th
                scope="col"
                class="pointer"
                (click)="toggleSort('marketName')"
              >
                Market
              </th>
              <th
                scope="col"
                class="pointer"
                (click)="toggleSort('selectionName')"
              >
                Selection
              </th>
              <th
                scope="col"
                class="pointer"
                (click)="toggleSort('placedOdds')"
              >
                Odds Placed
              </th>
              <th scope="col" class="pointer" (click)="toggleSort('betRate')">
                Odds Matched
              </th>
              <th scope="col" class="pointer" (click)="toggleSort('stake')">
                Matched
              </th>
              <th scope="col" class="pointer" (click)="toggleSort('stake')">
                Unmatched
              </th>
              <th
                scope="col"
                class="pointer"
                (click)="toggleSort('profitLiability')"
              >
                Profit/Liability
              </th>
              <th scope="col" class="last text-center">IP</th>
            </tr>
          </thead>
          <tbody>
            <tr
              *ngFor="
                let viewTotalEach of viewTotal
                  | sort : sortColumn : sortAscending;
                let i = index
              "
            >
              <td class="col">{{ viewTotal.length - i }}</td>
              <td class="col">{{ viewTotalEach.userName }}</td>
              <td class="col">
                {{ viewTotalEach.placedDate | date : "mediumTime" }}
              </td>
              <td class="col">{{ viewTotalEach.event | truncate : 33 }}</td>
              <td class="col">
                <span
                  *ngIf="!viewTotalEach.isBack"
                  class="border bg-danger text-danger me-2 border-3 border-danger"
                ></span>
                <span
                  *ngIf="viewTotalEach.isBack"
                  class="border bg-primary text-primary border-primary me-2 border-3"
                ></span>
                {{ viewTotalEach.marketName }}
              </td>
              <td class="col">{{ viewTotalEach.selectionName }}</td>
              <td class="col">{{ viewTotalEach.placedOdds }}</td>
              <td class="col">{{ viewTotalEach.betRate }}</td>
              <td class="col">
                <ng-container *ngIf="viewTotalEach.isMatched; else notMatched">
                  {{ viewTotalEach.stake | indianCurrency }}
                </ng-container>
                <ng-template #notMatched> -- </ng-template>
              </td>
              <td class="col">
                <ng-container *ngIf="!viewTotalEach.isMatched; else notMatched">
                  {{ viewTotalEach.stake | indianCurrency }}
                </ng-container>
                <ng-template #notMatched> -- </ng-template>
              </td>
              <td
                class="col"
                [ngClass]="
                  viewTotalEach.isBack ? 'text-danger' : 'text-success'
                "
              >
                <strong>{{
                  viewTotalEach.profitLiability | indianCurrency
                }}</strong>
              </td>
              <td class="col">
                <div class="tooltipnk m-1">
                  <i
                    class="fa-sharp fa-solid fa-clipboard cursor-pointer"
                    ngxClipboard
                    [cbContent]="viewTotalEach.IP"
                    [container]="container"
                  ></i>
                  <span class="tooltiptext tabTooltip px-5 w-auto">
                    <small #container>
                      {{ viewTotalEach.IP }}
                    </small>
                  </span>
                </div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </section>

  <!-- <div *ngIf="viewTotal.length == 0" class="border text-center p-5">
    <h4 *ngIf="viewTotal.length == 0 && !isLoading">No data found</h4>
    <h4 *ngIf="isLoading">Loading...</h4>
  </div> -->
  <div class="row">
    <div class="col-md-12">
      <div *ngIf="viewTotal.length > 0">
        <button
          class="btn rounded-pill text-dark"
          [disabled]="currentPage === 1"
          (click)="prev()"
        >
          Prev
        </button>
        <span class="btn btn-pink rounded-pill ps-4 pe-4"
          >{{ currentPage }} / {{ totalPages }}
        </span>
        <button
          class="btn rounded-pill text-dark"
          [disabled]="currentPage === totalPages"
          (click)="next()"
        >
          Next
        </button>
      </div>
    </div>
  </div>
</main>

<!--modal Start-->
<div
  class="modal fade"
  id="exampleModalToggle"
  aria-hidden="true"
  aria-labelledby="exampleModalToggleLabel"
  tabindex="-1"
>
  <div class="modal-dialog modal-sm">
    <div class="modal-content modalradius">
      <!-- <div class="modal-header">
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div> -->
      <div class="modal-body text-center p-4 pb-3">
        <div class="row border-bottom p-2">
          <div class="col-md-6">Runs</div>
          <div class="col-md-6">P&L</div>
        </div>
        <ng-container *ngIf="ladderObj && ladderObj.length > 0">
          <div *ngFor="let ldr of ladderObj">
            <div
              class="row border-bottom p-2"
              *ngIf="ldr['position'] != 'last'"
            >
              <div
                class="col-md-6"
                *ngIf="ldr['startScore'] != ldr['endScore']"
              >
                {{ ldr["startScore"] }}-{{ ldr["endScore"] }}
              </div>
              <div
                class="col-md-6"
                *ngIf="ldr['startScore'] == ldr['endScore']"
              >
                {{ ldr["startScore"] }}
              </div>
              <div class="col-md-6">
                <span
                  [ngClass]="
                    ldr['amount'] >= 0 ? 'text-success' : 'text-danger'
                  "
                  >{{ ldr["amount"] | indianCurrency}}</span
                >
              </div>
            </div>
            <div
              class="row border-bottom p-2"
              *ngIf="ldr['position'] == 'last'"
            >
              <ng-container>
                <div class="col-md-6">{{ ldr["startScore"] }}+</div>
              </ng-container>
              <div class="col-md-6">
                <span
                  [ngClass]="
                    ldr['amount'] >= 0 ? 'text-success' : 'text-danger'
                  "
                  >{{ ldr["amount"] | indianCurrency}}</span
                >
              </div>
            </div>
          </div>
        </ng-container>
        <div class="row">
          <button
            class="btn col-md-4 mt-3 btn-outline-pink border-0"
            data-bs-target="#exampleModalToggle2"
            data-bs-toggle="modal"
            data-bs-dismiss="modal"
          >
            CLOSE
          </button>
        </div>
      </div>
    </div>
  </div>
</div>
